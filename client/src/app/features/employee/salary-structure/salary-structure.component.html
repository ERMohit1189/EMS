<div class="container">
  <h2>Salary Structure</h2>
  <p class="subtitle">Define and view employee salary breakdowns.</p>

  <mat-card>
    <mat-card-header>
      <mat-card-title>Select Employee</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field class="full-width">
        <mat-label>Employee</mat-label>
        <mat-select (selectionChange)="onEmployeeChange($event.value)">
          <mat-option *ngFor="let emp of employees" [value]="emp.id">
            {{ emp.name }} - {{ emp.designation }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <form [formGroup]="salaryForm" (ngSubmit)="onSubmit()" *ngIf="selectedEmployee" class="form">
    
    <div class="grid">
      <!-- Earnings -->
      <mat-card>
        <mat-card-header>
          <mat-card-title>Earnings</mat-card-title>
        </mat-card-header>
        <mat-card-content class="salary-grid">
          
          <div class="salary-field">
            <label>Basic Salary</label>
            <mat-form-field>
              <input matInput type="number" formControlName="basicSalary">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>HRA (50%)</label>
            <mat-form-field>
              <input matInput type="number" formControlName="hra">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>DA (20%)</label>
            <mat-form-field>
              <input matInput type="number" formControlName="da">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>LTA</label>
            <mat-form-field>
              <input matInput type="number" formControlName="lta">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>Conveyance</label>
            <mat-form-field>
              <input matInput type="number" formControlName="conveyance">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>Medical</label>
            <mat-form-field>
              <input matInput type="number" formControlName="medical">
            </mat-form-field>
          </div>

          <mat-divider></mat-divider>

          <div class="salary-total">
            <strong>Gross Salary</strong>
            <strong>₹{{ grossSalary | number }}</strong>
          </div>

        </mat-card-content>
      </mat-card>

      <!-- Deductions -->
      <mat-card>
        <mat-card-header>
          <mat-card-title>Deductions</mat-card-title>
        </mat-card-header>
        <mat-card-content class="salary-grid">
          
          <div class="salary-field">
            <label>PF</label>
            <mat-form-field>
              <input matInput type="number" formControlName="pf">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>Professional Tax</label>
            <mat-form-field>
              <input matInput type="number" formControlName="professionalTax">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>Income Tax (TDS)</label>
            <mat-form-field>
              <input matInput type="number" formControlName="incomeTax">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>EPF</label>
            <mat-form-field>
              <input matInput type="number" formControlName="epf">
            </mat-form-field>
          </div>

          <div class="salary-field">
            <label>ESIC</label>
            <mat-form-field>
              <input matInput type="number" formControlName="esic">
            </mat-form-field>
          </div>

          <mat-divider></mat-divider>

          <div class="salary-total">
            <strong>Total Deductions</strong>
            <strong>₹{{ totalDeductions | number }}</strong>
          </div>

        </mat-card-content>
      </mat-card>
    </div>

    <mat-card class="net-salary">
      <mat-card-content>
        <div class="net-salary-display">
          <h3>Net Salary Payable</h3>
          <div class="amount">₹{{ netSalary | number }}</div>
        </div>
      </mat-card-content>
    </mat-card>

    <button mat-raised-button color="primary" type="submit" class="save-button">
      Save Structure
    </button>

  </form>
</div>
